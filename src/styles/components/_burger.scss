@use "../variables" as v;
@use "../mixins" as m;
@use "../pixel" as pb;

// ─── 버거 스택 영역 ───────────────────────────────────
.burger-stack {
  display: flex;
  flex-direction: column-reverse;
  align-items: center;
  justify-content: flex-end;
  position: relative;

  @include m.mobile {
    // 주문서 길이에 따라 영역 높이가 줄면 버거도 같이 작아짐 (container query)
    width: min(m.vw(200), 55cqh);
    min-height: m.vw(60);
  }
  @include m.desktop {
    width: 220px;
    min-height: 60px;
  }
}

// ─── 번 이미지 ────────────────────────────────────────
.burger-bun {
  width: 100%;
  display: block;
  image-rendering: pixelated;
  position: relative;
  z-index: 0;

  // 완성 시 위 번이 떨어지는 애니메이션
  &--top-drop {
    animation: drop-bun 0.38s cubic-bezier(0.22, 0.61, 0.36, 1) forwards;
  }
}

// ─── 재료 레이어 (이미지) ─────────────────────────────
.ingredient-layer {
  width: 100%;
  position: relative;
  z-index: 1;
  // 위에서 떨어지는 애니메이션 (column-reverse 이므로 재료는 시각적으로 위에서 내려옴)
  animation: drop-in 0.22s cubic-bezier(0.22, 0.61, 0.36, 1);

  &.ingredient-layer--veggie {
    margin-bottom: -32%;
  }
  &.ingredient-layer--cheese {
    margin-bottom: -40%;
  }
  &.ingredient-layer--sauce {
    margin-bottom: -32%;
  }
  &.ingredient-layer--patty {
    margin-bottom: -32%;
  }

  img {
    width: 100%;
    height: auto;
    display: block;
    image-rendering: pixelated;
  }
}

.burger-bun--top-drop {
  position: relative;
  z-index: 2;
  margin-bottom: -32%;
}

// ─── 제출 플래시 오버레이 ─────────────────────────────
.burger-flash {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: v.$font-pixel;
  pointer-events: none;
  border-radius: 2px;

  @include m.mobile {
    font-size: m.vw(24);
  }
  @include m.desktop {
    font-size: 28px;
  }

  &--correct {
    color: v.$color-success;
    animation: flash-fade 0.5s ease-out forwards;
  }
  &--wrong {
    background: rgba(217, 48, 37, 0.2);
    color: v.$color-danger;
    animation: flash-fade 0.5s ease-out forwards;
  }
}

// ─── 키프레임 ─────────────────────────────────────────

// 재료가 위에서 떨어지는 모션
@keyframes drop-in {
  from {
    transform: translateY(-60px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

// 완성 시 위 번이 내려오는 모션
@keyframes drop-bun {
  0% {
    transform: translateY(-90px);
    opacity: 0;
  }
  60% {
    transform: translateY(6px);
    opacity: 1;
  }
  80% {
    transform: translateY(-3px);
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes flash-fade {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}
